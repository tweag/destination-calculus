Example:

alloc (Int x Int) \ d: |Int x Int|. case fillPair d of {
    <d1, d2> -> fillLeaf
                    (alloc (\ d3 : |Int|. fillLeaf 2 d2 ; fillLeaf 3 d3))
                    d1
}

Derivations:

{} ; {d2 : |Int|} |- d2 : |Int|
{} ; {} |- 2 : Int
-------------------------------------- FillL (A)
{} ; {d2 : |Int|} |- fillLeaf 2 d2 : 1


{} ; {d3 : |Int|} |- d3 : |Int|
{} ; {} |- 3 : Int
-------------------------------------- FillL (B)
{} ; {d3 : |Int|} |- fillLeaf 3 d3 : 1


(A)
(B)
--------------------------------------------------------------------- PatU
{} ; {d2 : |Int|} µ {d3 : |Int|} |- fillLeaf 2 d2 ; fillLeaf 3 d3 : 1
-------------------------------------------------------------------------------- Lam
{} ; {d2 : |Int|} |- \ d3 : |Int|. fillLeaf 2 d2 ; fillLeaf 3 d3 : |Int| --o 1
-------------------------------------------------------------------------------- Alloc (C)
{} ; {d2 : |Int|} |- alloc (\ d3 : |Int|. fillLeaf 2 d2 ; fillLeaf 3 d3) : Int

{} ; {d1 : |Int|} |- d1 : |Int|
(C)
-------------------------------------------------------- FillL (D)
{} ; {d1 : |Int|} µ {d2 : |Int|} |- fillLeaf *** d1 : 1

{} ; {d : |Int x Int|} |- d : |Int x Int|
----------------------------------------------------- FillP (E)
{} ; {d : |Int x Int|} |- fillPair d : |Int| x |Int|

(E)
(D)
------------------------------------------------------------------------------ PatP
{} ; {d : |Int x Int|} |- case fillPair d of { <d1, d2> -> fillLeaf *** d1 } : 1
------------------------------------------------------------------------------------------------------ Lam
{} ; {} |- \ d: |Int x Int|. case fillPair d of { <d1, d2> -> fillLeaf *** d1 } : |Int x Int| --o 1
--------------------------------------------------------------------------------------------------------------- Alloc
{} ; {} |- alloc (Int x Int) \ d: |Int x Int|. case fillPair d of { <d1, d2> -> fillLeaf *** d1 } : Int x Int

